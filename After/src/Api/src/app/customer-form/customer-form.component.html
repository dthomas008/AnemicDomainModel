<div class="ui-grid ui-grid-responsive ui-fluid">
  <form novalidate (ngSubmit)="saveCustomer()" [formGroup]="customerForm">
    <div class="ui-grid-row">
      <div class="ui-grid-col-1">
        <label for="name">Name</label>
      </div>
      <div class="ui-grid-col-11">
        <input pInputText id="name" placeholder="Name (required)" formControlName="name" />
        <span class="help-block" *ngIf="(customerForm.get('name').touched || 
        customerForm.get('name').dirty) && 
        customerForm.get('name').errors">
          <span *ngIf="customerForm.get('name').errors.required">
            Please enter your name.
          </span>
          <span *ngIf="customerForm.get('name').errors.minlength">
            The first name must be longer than 3 characters.
          </span>
        </span>
      </div>
    </div>
    <div class="ui-grid-row">
      <div class="ui-grid-col-1">
        <label for="email">Email</label>
      </div>
      <div class="ui-grid-col-11">
        <input pInputText id="email" placeholder="Email (required)" formControlName="email" />
        <span class="help-block" *ngIf="(customerForm.get('email').touched || 
        customerForm.get('email').dirty) && 
        customerForm.get('email').errors">
          <span *ngIf="customerForm.get('email').errors.required">
            Please enter your email.
          </span>
          <span *ngIf="customerForm.get('email').errors.pattern">
            Please enter a valid email.
          </span>

        </span>
        <span *ngIf="customerForm.get('email').status === 'PENDING'">
          Checking...
        </span>
        <span *ngIf="customerForm.get('email').status === 'VALID'">
          Email is available!
        </span>

        <span *ngIf="customerForm.get('email').errors && customerForm.get('email').errors.emailTaken">
          {{customerForm.get('email').errors.emailTaken}}
        </span>
      </div>
    </div>
    <br>Dirty: {{ customerForm.dirty }}
    <br>Touched: {{ customerForm.touched }}
    <br>Valid: {{ customerForm.valid }}
    <br>Value: {{ customerForm.value | json }}
    <br>Email Errors: {{ customerForm.get('email').errors | json }}

    <p-footer>
      <div class="ui-grid-row">
        <!-- <button class="ui-grid-col-1" type="button" pButton icon="fa-close" label="Delete"></button> -->
        <button class="ui-grid-col-1" type="submit" pButton icon="fa-check" label="Save" [disabled]='!customerForm.valid'></button>
        <span class="ui-grid-col-11">&nbsp;</span>
      </div>
    </p-footer>
  </form>
  <div class='has-error' *ngIf='message'>{{message}}</div>
</div>